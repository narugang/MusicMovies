<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>movies</title>
    <link rel="stylesheet" href="./css/movies.css" />
    <style>
      #movieContent > div {
        width: 300px;
        background-color: white;
        margin: 20px;
      }
    </style>
  </head>

  <body>
    <header>
      <div class="menuBar">
        <ul class="menuBarWrap">
          <li><a href="./index.html">Home</a></li>
          <li><a href="./music.html">Your Best Music</a></li>
          <li><a href="./movie.html">Your Best Movie</a></li>
          <li><a href="./contactpage.html">Contact Us</a></li>
        </ul>
      </div>
    </header>
    <nav>
      <div>
        <input
          type="text"
          id="searchKeyword"
          placeholder="검색어를 입력하세요"
        />
        <input type="button" id="search_btn" value="Search" />
      </div>
    </nav>
    <section>
      <div id="testSec"></div>
      <div id="movieContent">
        <!-- <div><img src="./images/movies/hobbit.jpg" /></div>
        <div><img src="./images/movies/hobbit2.jpg" /></div>
        <div><img src="./images/movies/hobbit3.jpg" /></div>
        <div><img src="./images/movies/loadOfRing.jpg" /></div>
        <div><img src="./images/movies/loadOfRing2.jpg" /></div>
        <div><img src="./images/movies/loadOfRing3.jpg" /></div>
        <div>
          <img src="./images/movies/welcomeToDongmakgol.jpg" />
        </div> -->
      </div>
    </section>
    <footer>
      <div id="footer_Message">
        <b>Copyrightⓒ by Lee&Kang All Right Reserved</b>
      </div>
    </footer>
  </body>
  <script type="text/javascript" src="./js/movies.js"></script>
  <script>
    var requestURL = "https://yts.mx/api/v2/list_movies.json?sort_by=rating";
    var request = new XMLHttpRequest();

    request.open("GET", requestURL);
    console.log(request);

    request.responseType = "json";
    request.send();

    console.log(request);

    //응답이 반환 된 후
    request.onload = function () {
      //응답을 변수에 담는다. (movies)
      var movies = request.response;
      console.log(movies);

      //변수에 담은(movies)를 JS 객체에 포함한다.
      showMovies(movies);
    };

    // var infomation = new Array("title_long", "rating", "runtime");
    // var infoName = new Array("title", "rating", "runtime");
    // jsonObj.data.movies[i][infomation[j]];

    function showMovies(jsonObj) {
      for (i = 0; i < 15; i++) {
        var element = document.createElement("div");
        element.id = "testSec" + i;
        // element.textContent = jsonObj.data.movies[i].title_long;

        var addChild = document.getElementById("movieContent");
        addChild.appendChild(element);

        //Element 아래 하위 요소들
        var title = document.createElement("div");
        title.id = "title" + i;
        title.textContent = jsonObj.data.movies[i].title_long;

        var rating = document.createElement("div");
        rating.id = "rating" + i;
        rating.textContent = jsonObj.data.movies[i].rating;

        var runtime = document.createElement("div");
        runtime.id = "runtime" + i;
        runtime.textContent = jsonObj.data.movies[i].runtime;

        var years = document.createElement("div");
        years.id = "year" + i;
        years.textContent = jsonObj.data.movies[i].runtime;

        var img = document.createElement("img");
        img.id = "img" + i;
        img.src = jsonObj.data.movies[i].medium_cover_image;

        var summury = document.createElement("div");
        summury.id = "summ" + i;
        summury.style.width = "500px";
        summury.style.height = "550px";
        summury.style.backgroundColor = "white";
        summury.style.display = "none";
        summury.textContent = jsonObj.data.movies[i].description_full;

        var summuryBtn = document.createElement("input");
        summuryBtn.type = "button";
        summuryBtn.onclick = "viewBtn();";
        summuryBtn.value = "줄거리 보기";
        summuryBtn.id = "sumBtn" + i;

        // 만들어진 요소들을 movieContent\testSec\ 으로 append
        var underElement = document.getElementById("testSec" + i);
        underElement.appendChild(img);
        underElement.appendChild(title);
        underElement.appendChild(years);
        underElement.appendChild(rating);
        underElement.appendChild(runtime);
        underElement.appendChild(summuryBtn);
        underElement.appendChild(summury);
      }
    }

    function viewBtn()
  </script>
</html>
